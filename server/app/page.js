(()=>{var e={};e.id=974,e.ids=[974],e.modules={597:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(7413),s=r(7490);function n(){return(0,a.jsx)(s.default,{})}},666:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var a=r(5239),s=r(8088),n=r(8170),i=r.n(n),l=r(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,597)),"/home/runner/work/viral-images/viral-images/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,1077))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/home/runner/work/viral-images/viral-images/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,1077))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/runner/work/viral-images/viral-images/app/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3910:(e,t,r)=>{Promise.resolve().then(r.bind(r,7490))},5534:(e,t,r)=>{Promise.resolve().then(r.bind(r,7806))},7490:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/runner/work/viral-images/viral-images/components/home-client.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/viral-images/viral-images/components/home-client.tsx","default")},7806:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a=r(687),s=r(3210),n=r(3587),i=r(474),l=r(5814),o=r.n(l),d=r(5192);function u({startYear:e,endYear:t}){let[r,n]=(0,s.useState)([]),[l,u]=(0,s.useState)([]),[c,p]=(0,s.useState)(1),[m,h]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null);(0,s.useRef)(null);let f=(0,s.useRef)(null),[v,b]=(0,s.useState)(0),j=(0,s.useCallback)((e,t)=>Array.isArray(e)?e.map(e=>{let r=e.imagePaths,a=r.length>0?t.get(r[0]):void 0,s=r.map(e=>t.get(e)?.pub_date?new Date(t.get(e).pub_date).getFullYear():0).filter(e=>e>0),n=s.length>0?Math.min(...s):0,i=s.length>0?Math.max(...s):0;return{id:e.id,title:`Cluster ${e.id}`,imageCount:r.length,featureImage:a?.prediction_section_iiif_url||"/file.svg",alt:a?`${a.name||"Unknown"} - ${a.pub_date||"Unknown"}`:"Cluster image",startYear:n,endYear:i}}):(console.error("processClusters received non-array data:",e),[]),[]);(0,s.useCallback)(()=>{h(!0);let e=c+1,t=(e-1)*10,a=r.slice(t,t+10);if(a.length>0){let t=j(a,new Map(r.flatMap(e=>e.imagePaths).map(e=>r.find(t=>t.imagePaths.includes(e))?.firstImageMeta).filter(Boolean).map(e=>[e.filepath,e])));u(e=>[...e,...t]),p(e)}h(!1)},[r,c,j]);let w=l.length<r.length,y=(0,s.useMemo)(()=>l.filter(r=>r.startYear>=e&&r.endYear<=t),[l,e,t]);return m?(0,a.jsx)("div",{className:"container mx-auto py-8 text-center",children:"Loading clusters..."}):x?(0,a.jsxs)("div",{className:"container mx-auto py-8 text-center text-red-500",children:["Error: ",x]}):(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{ref:f,className:"relative",style:{height:v},children:[y.map(e=>(0,a.jsx)(o(),{href:`/cluster/${e.id}`,className:"absolute block masonry-item",children:(0,a.jsx)(d.Zp,{className:"group relative cursor-pointer overflow-hidden p-0 w-full h-full",children:e.featureImage&&(0,a.jsxs)("div",{className:"relative w-full h-auto",children:[(0,a.jsx)(i.default,{src:e.featureImage,alt:e.alt||e.title,width:500,height:300,className:"w-full h-auto rounded-none transition-transform duration-300 group-hover:scale-105"}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/10 flex flex-col justify-end p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,a.jsx)(d.ZB,{className:"text-white text-lg",children:e.title}),(0,a.jsxs)(d.BT,{className:"text-gray-200 text-sm",children:[e.imageCount," images (",e.startYear," - ",e.endYear,")"]})]})]})})},e.id)),m&&(0,a.jsx)("p",{className:"w-full text-center py-4",children:"Loading more clusters..."}),!m&&w&&(0,a.jsx)("div",{id:"load-more-trigger",style:{height:"1px",position:"absolute",bottom:"-50px",width:"100%"}}),!w&&(0,a.jsx)("p",{className:"text-center w-full py-4",children:"No more clusters to load."})]})})}function c(){let[e,t]=(0,s.useState)(1756),[r,i]=(0,s.useState)(1963),[l,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[p,m]=(0,s.useState)(null);return d?(0,a.jsx)("div",{className:"px-4 py-4 text-center",children:"Loading application data..."}):p?(0,a.jsxs)("div",{className:"px-4 py-4 text-center text-red-500",children:["Error: ",p]}):(0,a.jsxs)("div",{className:"px-4 py-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Viral Images"}),(0,a.jsx)(n.K,{startYear:e,endYear:r,onDateRangeChange:(e,r)=>{t(e),i(r)},clusters:l}),(0,a.jsx)(u,{startYear:e,endYear:r})]})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,985,411,907],()=>r(666));module.exports=a})();