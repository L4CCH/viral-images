(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{8491:(e,s,t)=>{Promise.resolve().then(t.bind(t,8502)),Promise.resolve().then(t.t.bind(t,6874,23))},8502:(e,s,t)=>{"use strict";t.d(s,{ClusterDetailsClient:()=>T});var a=t(5155),l=t(2115),r=t(1168),i=t(6766),n=t(7168),c=t(8482),d=t(2355),o=t(3052),m=t(9074),x=t(5347),h=t(8136),u=t(4516),p=t(1284),j=t(7550),f=t(2138),g=t(8145),b=t(9304),v=t(3999);function N(e){let{delayDuration:s=0,...t}=e;return(0,a.jsx)(b.Kq,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function w(e){let{...s}=e;return(0,a.jsx)(N,{children:(0,a.jsx)(b.bL,{"data-slot":"tooltip",...s})})}function y(e){let{...s}=e;return(0,a.jsx)(b.l9,{"data-slot":"tooltip-trigger",...s})}function C(e){let{className:s,sideOffset:t=0,children:l,...r}=e;return(0,a.jsx)(b.ZL,{children:(0,a.jsxs)(b.UC,{"data-slot":"tooltip-content",sideOffset:t,className:(0,v.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...r,children:[l,(0,a.jsx)(b.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var _=t(7655);function k(e){let{className:s,children:t,...l}=e;return(0,a.jsxs)(_.bL,{"data-slot":"scroll-area",className:(0,v.cn)("relative",s),...l,children:[(0,a.jsx)(_.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(z,{}),(0,a.jsx)(_.OK,{})]})}function z(e){let{className:s,orientation:t="vertical",...l}=e;return(0,a.jsx)(_.VM,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,v.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",s),...l,children:(0,a.jsx)(_.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var A=t(4614);let M=new Map(t(796).map(e=>[e.filepath,e])),D=Object.entries(A).map(e=>{let[s,t]=e,a=t.map(e=>{let s=M.get(e);return s?{id:e,src:s.prediction_section_iiif_url,alt:"".concat(s.name," - ").concat(s.pub_date),date:s.pub_date,publication:s.name,publisher:s.publisher,place_of_publication:s.place_of_publication,caption:"Published in ".concat(s.name," on ").concat(s.pub_date,".")}:null}).filter(e=>null!==e);return{id:s,title:"Cluster ".concat(s),description:"A cluster of visually similar images from historical newspapers.",similarImages:a,alternatePublications:[]}});function P(e){let s,{startYear:t,endYear:r,clusterId:b}=e,v=D.find(e=>e.id===b),[_,A]=(0,l.useState)(0),M=(0,l.useRef)(null);if(!v)return(0,a.jsx)("div",{children:"Cluster not found"});let P=v.similarImages.filter(e=>{let s=new Date(e.date).getFullYear();return s>=t&&s<=r}).sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()),Y=e=>{A(e)},I=Math.min(Math.max(0,_),P.length-1),T=P[I];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold",children:["Image Cluster: ",v.title]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(g.E,{variant:"outline",className:"text-sm",children:[P.length," images (",t,"-",r,")"]})})]}),0===P.length&&(0,a.jsx)("div",{className:"p-6 text-center border rounded-lg bg-muted/50",children:(0,a.jsxs)("p",{className:"text-muted-foreground",children:["No images found in the selected time range (",t," - ",r,"). Try adjusting the timeline controls above."]})}),P.length>0&&(0,a.jsx)(c.Zp,{className:"overflow-hidden",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Chronological Timeline"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{_>0&&A(_-1)},disabled:0===I,children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"Earlier"]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{_<P.length-1&&A(_+1)},disabled:I>=P.length-1,children:["Later",(0,a.jsx)(o.A,{className:"h-4 w-4 ml-1"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-4",children:((s=Math.max(0,I-Math.floor(2.5)))+5>P.length&&(s=Math.max(0,P.length-5)),Array.from({length:5}).map((e,t)=>{let l=s+t,r=P[l],n=l===I,c=l<P.length;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"relative aspect-[4/3] overflow-hidden rounded-lg border cursor-pointer transition-all ".concat(n?"ring-2 ring-primary shadow-lg scale-105":c?"hover:ring-2 hover:ring-primary/50 hover:scale-102":"opacity-30"),onClick:()=>c&&Y(l),children:c&&r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{src:r.src||"/placeholder.svg",alt:r.alt,fill:!0,className:"object-cover"}),n&&(0,a.jsx)("div",{className:"absolute inset-0 bg-primary/10 flex items-center justify-center",children:(0,a.jsx)("div",{className:"bg-primary text-primary-foreground rounded-full p-1",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})})]}):(0,a.jsx)("div",{className:"absolute inset-0 bg-muted flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-muted-foreground text-xs",children:"No image"})})}),c&&r&&(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium",children:new Date(r.date).getFullYear()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:r.publication})]})]},t)}))}),(0,a.jsx)("div",{className:"relative h-2 bg-muted rounded-full",children:(0,a.jsx)("div",{className:"absolute top-0 h-full w-1 bg-primary rounded-full transition-all duration-300",style:{left:"".concat(I/Math.max(1,P.length-1)*100,"%")}})})]}),T&&(0,a.jsx)("div",{className:"space-y-4 border-t pt-6",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"relative aspect-[4/3] overflow-hidden rounded-lg border",children:(0,a.jsx)(i.default,{src:T.src||"/placeholder.svg",alt:T.alt,fill:!0,className:"object-cover"})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Image Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:T.date})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:T.publication})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:T.publisher})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:T.place_of_publication})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Caption"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:T.caption})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Position in Timeline"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Image ",I+1," of ",P.length," in selected range"]})]})]})]})}),v.alternatePublications.length>0&&(0,a.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Similar Images in Other Publications"}),(0,a.jsx)(N,{children:(0,a.jsxs)(w,{children:[(0,a.jsx)(y,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})}),(0,a.jsx)(C,{children:(0,a.jsx)("p",{className:"max-w-xs text-sm",children:"How different newspapers covered the same event on similar dates."})})]})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.$,{variant:"outline",size:"icon",className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 rounded-full bg-background/80 backdrop-blur-sm",onClick:()=>{M.current&&M.current.scrollBy({left:-200,behavior:"smooth"})},children:(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsxs)(k,{className:"pb-4",children:[(0,a.jsx)("div",{className:"flex space-x-4 px-8",ref:M,children:v.alternatePublications.map(e=>(0,a.jsxs)("div",{className:"flex-none w-[200px]",children:[(0,a.jsxs)("div",{className:"relative aspect-video overflow-hidden rounded-lg border cursor-pointer hover:ring-2 hover:ring-primary/50 transition-all",children:[(0,a.jsx)(i.default,{src:e.src||"/placeholder.svg",alt:e.alt,fill:!0,className:"object-cover"}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 p-1",children:[(0,a.jsx)("p",{className:"text-xs text-white truncate font-medium",children:e.publication}),(0,a.jsx)("p",{className:"text-xs text-white/80 truncate",children:e.date})]})]}),(0,a.jsx)("p",{className:"text-xs mt-1 line-clamp-2 text-muted-foreground",children:e.caption})]},e.id))}),(0,a.jsx)(z,{orientation:"horizontal"})]}),(0,a.jsx)(n.$,{variant:"outline",size:"icon",className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 rounded-full bg-background/80 backdrop-blur-sm",onClick:()=>{M.current&&M.current.scrollBy({left:200,behavior:"smooth"})},children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})]})]})]})})}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-muted/50",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"About This Cluster"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:v.description})]})]})}var Y=t(6874),I=t.n(Y);function T(e){let{clusterKey:s,initialStartYear:t,initialEndYear:i,clusters:c}=e,[d,o]=(0,l.useState)(t),[m,x]=(0,l.useState)(i);return(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Newspaper Image Clusters Timeline"}),(0,a.jsx)(r.K,{onDateRangeChange:(e,s)=>{o(e),x(s)},startYear:d,endYear:m,activeStartYear:t,activeEndYear:i,clusters:c}),(0,a.jsx)(I(),{href:"/",children:(0,a.jsx)(n.$,{className:"mb-4",children:"← Back to Cluster List"})}),(0,a.jsx)(P,{startYear:d,endYear:m,clusterId:s})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[516,965,649,441,684,358],()=>s(8491)),_N_E=e.O()}]);